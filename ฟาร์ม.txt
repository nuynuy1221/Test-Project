--== à¹€à¸Šà¹‡à¸„ PlaceId à¸à¹ˆà¸­à¸™à¸£à¸±à¸™ ==--
local targetPlace = 16277809958
if game.PlaceId ~= targetPlace then
    warn("PlaceId à¹„à¸¡à¹ˆà¸•à¸£à¸‡ à¸ªà¸„à¸£à¸´à¸›à¸•à¹Œà¸ˆà¸°à¹„à¸¡à¹ˆà¸—à¸³à¸‡à¸²à¸™")
    return
end

repeat task.wait() until game:IsLoaded()
task.wait(1)

local Players = game:GetService("Players")
local player = Players.LocalPlayer

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Networking = ReplicatedStorage:WaitForChild("Networking")
local UnitEvent = Networking:WaitForChild("UnitEvent")

--------------------------------------------------------------------
-- ðŸ” à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¹€à¸Šà¹‡à¸„à¹€à¸¥à¹€à¸§à¸¥
--------------------------------------------------------------------
local function getLevel()
    local levelLabel = player.PlayerGui.Hotbar.Main.Level:WaitForChild("Level")
    local text = levelLabel.Text or ""

    local num = text:match("%d+")  -- à¸”à¸¶à¸‡à¸•à¸±à¸§à¹€à¸¥à¸‚à¸Šà¸¸à¸”à¹à¸£à¸à¹ƒà¸™à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡
    return tonumber(num) or 0
end

--------------------------------------------------------------------
-- ðŸšª à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¹€à¸—à¹€à¸¥à¸žà¸­à¸£à¹Œà¸•à¹€à¸¡à¸·à¹ˆà¸­à¹€à¸¥à¹€à¸§à¸¥à¸–à¸¶à¸‡ 11
--------------------------------------------------------------------
local function teleportToLobby()
    local args = {
        [1] = "Lobby"
    }

    game:GetService("ReplicatedStorage"):WaitForChild("Networking"):WaitForChild("TeleportEvent"):FireServer(unpack(args))

    warn("ðŸ”¥ à¹€à¸¥à¹€à¸§à¸¥à¸–à¸¶à¸‡ 11 â€” Teleport à¸à¸¥à¸±à¸š Lobby à¹à¸¥à¹‰à¸§!")
end

--------------------------------------------------------------------
-- â­ à¸–à¹‰à¸²à¹€à¸¥à¹€à¸§à¸¥à¸–à¸¶à¸‡ 11 à¹ƒà¸«à¹‰à¹€à¸—à¹€à¸¥à¸žà¸­à¸£à¹Œà¸•à¸—à¸±à¸™à¸—à¸µ à¹à¸¥à¸°à¸«à¸¢à¸¸à¸”à¸ªà¸„à¸£à¸´à¸›à¸•à¹Œà¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”
--------------------------------------------------------------------
task.spawn(function()
    while true do
        local lv = getLevel()

        if lv >= 11 then
            teleportToLobby()
            return  -- â›” à¸«à¸¢à¸¸à¸”à¸—à¸±à¹‰à¸‡à¸ªà¸„à¸£à¸´à¸›à¸•à¹Œ
        end

        task.wait(1)
    end
end)

--------------------------------------------------------------------
-- à¸•à¸±à¸§à¸¥à¸°à¸„à¸£à¸—à¸µà¹ˆà¸ˆà¸°à¸§à¸²à¸‡
--------------------------------------------------------------------
local unitsToPlace = {
    {name = "Luffo", id = 39},
    {name = "Roku",  id = 41}
}

-- à¸ˆà¸¸à¸”à¸§à¸²à¸‡ 6 à¸ˆà¸¸à¸”
local placements = {
    Vector3.new(427.75726318359375, 2.29998779296875, -347.031005859375),
    Vector3.new(441.1226501464844, 2.29998779296875, -348.0281677246094),
    Vector3.new(438.84246826171875, 2.29998779296875, -322.0071716308594),
    Vector3.new(451.99615478515625, 2.29998779296875, -322.6607971191406),
    Vector3.new(450.403076171875, 2.29998779296875, -349.50823974609375),
    Vector3.new(463.7310791015625, 2.29998779296875, -348.7103271484375)
}

--------------------------------------------------------------------
-- ðŸ”„ à¸£à¸°à¸šà¸šà¸§à¸²à¸‡à¸•à¸±à¸§à¸¥à¸°à¸„à¸£ (à¸¥à¸¹à¸›à¸—à¸¸à¸ 15 à¸§à¸´)
--------------------------------------------------------------------
task.spawn(function()
    while true do
        -- à¸–à¹‰à¸²à¹€à¸¥à¹€à¸§à¸¥à¸–à¸¶à¸‡à¹ƒà¸«à¹‰à¸«à¸¢à¸¸à¸”à¸£à¸°à¸šà¸šà¸§à¸²à¸‡à¸—à¸±à¸™à¸—à¸µ
        if getLevel() >= 11 then return end

        for _, unit in ipairs(unitsToPlace) do
            for _, pos in ipairs(placements) do
                local args = {
                    [1] = "Render",
                    [2] = {
                        [1] = unit.name,
                        [2] = unit.id,
                        [3] = pos,
                        [4] = 0
                    }
                }

                UnitEvent:FireServer(unpack(args))
                task.wait(1)
            end
        end

        task.wait(15)
    end
end)

--------------------------------------------------------------------
-- ðŸ”„ à¸£à¸°à¸šà¸šà¸­à¸±à¸›à¹€à¸à¸£à¸” (à¸¥à¸¹à¸›à¹„à¸¡à¹ˆà¸¡à¸µà¸—à¸µà¹ˆà¸ªà¸´à¹‰à¸™à¸ªà¸¸à¸”)
--------------------------------------------------------------------
task.spawn(function()
    while true do
        -- à¸–à¹‰à¸²à¹€à¸¥à¹€à¸§à¸¥à¸–à¸¶à¸‡à¹ƒà¸«à¹‰à¸«à¸¢à¸¸à¸”à¸­à¸±à¸›à¹€à¸à¸£à¸”
        if getLevel() >= 11 then return end

        local unitsFolder = workspace:WaitForChild("Units")

        for _, unitInstance in ipairs(unitsFolder:GetChildren()) do
            local uuid = unitInstance.Name

            local args = {
                [1] = "Upgrade",
                [2] = uuid
            }

            UnitEvent:FireServer(unpack(args))
            task.wait(1)
        end

        task.wait(1)
    end
end)